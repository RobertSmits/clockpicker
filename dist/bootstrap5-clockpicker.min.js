/*!
 * ClockPicker v0.0.10 (http://weareoutman.github.io/clockpicker/)
 * Copyright 2014 Wang Shenwei.
 * Licensed under MIT (https://github.com/weareoutman/clockpicker/blob/gh-pages/LICENSE)
 */
(()=>{var M,t,A=window.jQuery,o=A(window),V=A(document),e="http://www.w3.org/2000/svg",T="SVGAngle"in window&&((t=document.createElement("div")).innerHTML="<svg/>",i=(t.firstChild&&t.firstChild.namespaceURI)==e,t.innerHTML="",i),i="transition"in(t=document.createElement("div").style)||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t,s="ontouchstart"in window,P="mousedown"+(s?" touchstart":""),H="mousemove.clockpicker"+(s?" touchmove.clockpicker":""),x="mouseup.clockpicker"+(s?" touchend.clockpicker":""),r=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null;function S(t){return document.createElementNS(e,t)}function I(t){return(t<10?"0":"")+t}var D=0,E=100,B=80,O=13,z=i?350:1,L=['<div class="popover clockpicker-popover">','<div class="arrow popover-arrow"></div>','<div class="popover-title popover-header">','<span class="clockpicker-span-hours text-primary"></span>'," : ",'<span class="clockpicker-span-minutes"></span>','<span class="clockpicker-span-am-pm"></span>',"</div>",'<div class="popover-content popover-body">','<div class="clockpicker-plate">','<div class="clockpicker-canvas"></div>','<div class="clockpicker-dial clockpicker-hours"></div>','<div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div>',"</div>",'<span class="clockpicker-am-pm-block">',"</span>","</div>","</div>"].join("");function n(t,h){var e=A(L),l=e.find(".clockpicker-plate"),i=e.find(".clockpicker-hours"),s=e.find(".clockpicker-minutes"),o=e.find(".clockpicker-am-pm-block"),n="INPUT"===t.prop("tagName"),c=n?t:t.find("input"),a=t.find(".input-group-addon, .input-group-text"),u=this;if(this.id=(g=++D+"",(v="cp")?v+g:g),this.element=t,this.options=h,this.options.hourstep=this.parseStep(this.options.hourstep,12),this.options.minutestep=this.parseStep(this.options.minutestep,60),this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=n,this.input=c,this.addon=a,this.popover=e,this.plate=l,this.hoursView=i,this.minutesView=s,this.amPmBlock=o,this.spanHours=e.find(".clockpicker-span-hours"),this.spanMinutes=e.find(".clockpicker-span-minutes"),this.spanAmPm=e.find(".clockpicker-span-am-pm"),this.amOrPm="",this.isBootstrap5=""!=window.getComputedStyle(document.body).getPropertyValue("--bs-body-color"),h.twelvehour&&(A('<button type="button" class="btn btn-sm btn-default btn-secondary clockpicker-button am-button">AM</button>').on("click",function(){u.amOrPm="AM",A(".clockpicker-span-am-pm").empty().append("AM"),u.raiseCallback(u.options.afterAmPmSelect)}).appendTo(this.amPmBlock),A('<button type="button" class="btn btn-sm btn-default btn-secondary clockpicker-button pm-button">PM</button>').on("click",function(){u.amOrPm="PM",A(".clockpicker-span-am-pm").empty().append("PM"),u.raiseCallback(u.options.afterAmPmSelect)}).appendTo(this.amPmBlock)),!0===h.clearbutton&&A('<button type="button" class="btn btn-sm btn-default btn-outline-secondary btn-block w-100 clockpicker-button">'+h.cleartext+"</button>").click(A.proxy(this.clear,this)).appendTo(e),!1!==h.autoclose&&"semi"!==h.autoclose||A('<button type="button" class="btn btn-sm btn-default btn-outline-secondary btn-block w-100 clockpicker-button">'+h.donetext+"</button>").click(A.proxy(this.done,this)).appendTo(e),"top"!==h.placement&&"bottom"!==h.placement||"top"!==h.align&&"bottom"!==h.align||(h.align="left"),"left"!==h.placement&&"right"!==h.placement||"left"!==h.align&&"right"!==h.align||(h.align="top"),e.addClass(h.placement),e.addClass("clockpicker-align-"+h.align),this.isBootstrap5){var r="bs-popover-bottom";switch(h.placement){case"top":r="bs-popover-top";break;case"bottom":r="bs-popover-bottom";break;case"left":r="bs-popover-start";break;case"right":r="bs-popover-end"}e.addClass(r)}this.spanHours.click(A.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(A.proxy(this.toggleView,this,"minutes")),c.on("focus.clockpicker click.clockpicker",A.proxy(this.show,this)),a.on("click.clockpicker",A.proxy(function(){this.input.is(":disabled")||this.toggle()},this));var p=A('<div class="clockpicker-tick"></div>');if(h.twelvehour)for(y=0;y<12;y+=h.hourstep)k=p.clone(),d=y/6*Math.PI,b=B,k.css("font-size","120%"),k.css({left:E+Math.sin(d)*b-O,top:E-Math.cos(d)*b-O}),k.html(0===y?12:y),i.append(k),k.on(P,C);else for(y=0;y<24;y+=h.hourstep){var k=p.clone(),d=y/6*Math.PI,m=0<y&&y<13,b=m?54:B;k.css({left:E+Math.sin(d)*b-O,top:E-Math.cos(d)*b-O}),m&&k.css("font-size","120%"),k.html(0===y?"00":y),i.append(k),k.on(P,C)}for(var f,v,g,w=Math.max(h.minutestep,5),y=0;y<60;y+=w)k=p.clone(),d=y/30*Math.PI,k.css({left:E+Math.sin(d)*B-O,top:E-Math.cos(d)*B-O}),k.css("font-size","120%"),k.html(I(y)),s.append(k),k.on(P,C);function C(t,s){var o,e=l.offset(),i=/^touch/.test(t.type),n=e.left+E,c=e.top+E,a=(i?t.originalEvent.touches[0]:t).pageX-n,r=(i?t.originalEvent.touches[0]:t).pageY-c,e=Math.sqrt(a*a+r*r),p=!1;s&&(e<67||93<e)||(t.preventDefault(),o=setTimeout(function(){M.addClass("clockpicker-moving")},200),T&&l.append(u.canvas),u.setHand(a,r,!0),V.off(H).on(H,function(t){t.preventDefault();var e=/^touch/.test(t.type),i=(e?t.originalEvent.touches[0]:t).pageX-n,e=(e?t.originalEvent.touches[0]:t).pageY-c;!p&&i==a&&e==r||(p=!0,u.setHand(i,e,!0))}),V.off(x).on(x,function(t){V.off(x),t.preventDefault();var e=/^touch/.test(t.type),i=(e?t.originalEvent.changedTouches[0]:t).pageX-n,e=(e?t.originalEvent.changedTouches[0]:t).pageY-c;(s||p)&&i==a&&e==r&&u.setHand(i,e),"hours"===u.currentView?u.toggleView("minutes",z/2):!0!==h.autoclose&&"semi"!==h.autoclose||(u.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){u.done()},z/2)),l.prepend(f),clearTimeout(o),M.removeClass("clockpicker-moving"),V.off(H)}))}l.on(P,function(t){0===A(t.target).closest(".clockpicker-tick").length&&C(t,!0)}),T&&(f=e.find(".clockpicker-canvas"),(v=S("svg")).setAttribute("class","clockpicker-svg"),v.setAttribute("width",200),v.setAttribute("height",200),(g=S("g")).setAttribute("transform","translate(100,100)"),(t=S("circle")).setAttribute("class","clockpicker-canvas-bearing"),t.setAttribute("cx",0),t.setAttribute("cy",0),t.setAttribute("r",2),(n=S("line")).setAttribute("x1",0),n.setAttribute("y1",0),(o=S("circle")).setAttribute("class","clockpicker-canvas-bg"),o.setAttribute("r",O),(c=S("circle")).setAttribute("class","clockpicker-canvas-fg"),c.setAttribute("r",3.5),g.appendChild(n),g.appendChild(o),g.appendChild(c),g.appendChild(t),v.appendChild(g),f.append(v),this.hand=n,this.bg=o,this.fg=c,this.bearing=t,this.g=g,this.canvas=f),this.raiseCallback(this.options.init)}n.prototype.parseStep=function(t,e){return e%t==0?t:1},n.DEFAULTS={default:"",fromnow:0,placement:"bottom",align:"left",donetext:"Done",cleartext:"Clear",autoclose:!1,clearbutton:!1,twelvehour:!1,vibrate:!0,hourstep:1,minutestep:1},n.prototype.raiseCallback=function(t){t&&"function"==typeof t&&t(this)},n.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},n.prototype.locate=function(){var t=this.element,e=this.popover,i=t.offset(),s=t.outerWidth(),o=t.outerHeight(),t=this.options.placement,n=this.options.align,c={},a=(e.show(),this.isBootstrap5?8:0);switch(t){case"bottom":c.top=i.top+o+a;break;case"right":c.left=i.left+s+a;break;case"top":c.top=i.top-e.outerHeight()-a;break;case"left":c.left=i.left-e.outerWidth()-a}switch(n){case"left":c.left=i.left;break;case"right":c.left=i.left+s-e.outerWidth();break;case"top":c.top=i.top;break;case"bottom":c.top=i.top+o-e.outerHeight()}e.css(c)},n.prototype.show=function(t){var e,i,s;this.isShown||(this.raiseCallback(this.options.beforeShow),(e=this).isAppended||(M=A(document.body).append(this.popover),o.on("resize.clockpicker"+this.id,function(){e.isShown&&e.locate()}),this.isAppended=!0),"now"===(s=((this.input.prop("value")||this.options.default||"")+"").split(":"))[0]&&(s=[(i=new Date(+new Date+this.options.fromnow)).getHours(),i.getMinutes()]),this.hours=+s[0]||0,this.hours=Math.round(this.hours/this.options.hourstep)*this.options.hourstep,this.minutes=+s[1]||0,this.minutes=Math.round(this.minutes/this.options.minutestep)*this.options.minutestep,this.spanHours.html(I(this.hours)),this.spanMinutes.html(I(this.minutes)),this.amOrPm=this.hours<12?"AM":"PM",this.options.twelvehour&&this.spanAmPm.empty().append(this.amOrPm),this.toggleView("hours"),this.locate(),this.isShown=!0,V.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){t=A(t.target);0===t.closest(e.popover).length&&0===t.closest(e.addon).length&&0===t.closest(e.input).length&&e.hide()}),V.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&e.hide()}),this.raiseCallback(this.options.afterShow))},n.prototype.hide=function(){this.raiseCallback(this.options.beforeHide),this.isShown=!1,V.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),V.off("keyup.clockpicker."+this.id),this.popover.hide(),this.raiseCallback(this.options.afterHide)},n.prototype.toggleView=function(t,e){var i=!1,s=("minutes"===t&&"visible"===A(this.hoursView).css("visibility")&&(this.raiseCallback(this.options.beforeHourSelect),i=!0),"hours"===t),o=s?this.hoursView:this.minutesView,n=s?this.minutesView:this.hoursView;this.currentView=t,this.spanHours.toggleClass("text-primary",s),this.spanMinutes.toggleClass("text-primary",!s),n.addClass("clockpicker-dial-out"),o.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(e),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){n.css("visibility","hidden")},z),i&&this.raiseCallback(this.options.afterHourSelect)},n.prototype.resetClock=function(t){var e=this.currentView,i=this[e],e="hours"===e,s=i*(Math.PI/(e?6:30)),e=e&&0<i&&i<13?54:B,o=Math.sin(s)*e,n=-Math.cos(s)*e,c=this;T&&t?(c.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){c.canvas.removeClass("clockpicker-canvas-out"),c.setHand(o,n)},t)):this.setHand(o,n)},n.prototype.setHand=function(t,e,i){var s,o=Math.atan2(t,-e),n="hours"===this.currentView,t=Math.sqrt(t*t+e*e),e=this.options,t=n&&t<67,c=t?54:B,a=n?e.hourstep/6*Math.PI:e.minutestep/30*Math.PI;e.twelvehour&&(c=B),o<0&&(o=2*Math.PI+o),o=(s=Math.round(o/a))*a,n?(s*=e.hourstep,e.twelvehour||t||0===s||(s+=12),!e.twelvehour&&t&&0===s&&(s+=12),24===(s=e.twelvehour&&0===s?12:s)&&(s=0)):60===(s*=e.minutestep)&&(s=0),this[this.currentView]!==s&&r&&this.options.vibrate&&(this.vibrateTimer||(navigator[r](10),this.vibrateTimer=setTimeout(A.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=s,this[n?"spanHours":"spanMinutes"].html(I(s)),T?(i||!n&&s%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg")),a=Math.sin(o)*c,t=-Math.cos(o)*c,this.hand.setAttribute("x2",a),this.hand.setAttribute("y2",t),this.bg.setAttribute("cx",a),this.bg.setAttribute("cy",t),this.fg.setAttribute("cx",a),this.fg.setAttribute("cy",t),!1==n&&this.raiseCallback(this.options.afterMinuteSelect)):this[n?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=A(this);t.toggleClass("active",s===+t.html())})},n.prototype.done=function(){this.raiseCallback(this.options.beforeDone),this.hide();var t=this.input.prop("value"),e=I(this.hours)+":"+I(this.minutes);this.options.twelvehour&&(e+=this.amOrPm),this.input.prop("value",e),e!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),!0!==this.options.autoclose&&"semi"!==this.options.autoclose||this.input.trigger("blur"),this.raiseCallback(this.options.afterDone)},n.prototype.clear=function(){this.raiseCallback(this.options.beforeClear),this.hide();var t=this.input.prop("value");this.input.prop("value",""),""!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.input.trigger("blur"),this.raiseCallback(this.options.afterClear)},n.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(o.off("resize.clockpicker"+this.id),this.popover.remove())},A.fn.clockpicker=function(i){var s=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=A(this),e=t.data("clockpicker");e?"function"==typeof e[i]&&e[i].apply(e,s):(e=A.extend({},n.DEFAULTS,t.data(),"object"==typeof i&&i),t.data("clockpicker",new n(t,e)))})}})();